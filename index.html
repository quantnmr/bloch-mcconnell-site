<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloch-McConnell Exchange NMR Simulation</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>The Bloch-McConnell Equations and Exchange Phenomenon</h1>
            <p>Interactive simulation of two-state chemical exchange in NMR spectroscopy</p>
        </div>

        <div class="content">
            <div class="controls-panel">
                <h2>Controls</h2>
                
                <div class="info-box">
                    <h3>About This Tool</h3>
                    <p>This interactive tool demonstrates the Bloch-McConnell equations for two-state chemical exchange in NMR. Adjust the exchange rates, chemical shifts, and relaxation parameters to see how they affect the NMR spectrum and FID.</p>
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">k<sub>AB</sub></span> = <span class="value" id="kAB-value">1.00</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Exchange Rate A→B</span>
                    </div>
                    <input type="range" id="kAB" class="slider" min="-1" max="6" step="0.01" value="0">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">k<sub>BA</sub></span> = <span class="value" id="kBA-value">1.00</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Exchange Rate B→A</span>
                    </div>
                    <input type="range" id="kBA" class="slider" min="-1" max="6" step="0.01" value="0">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">R<sub>2,A</sub></span> = <span class="value" id="R2A-value">50.12</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Transverse Relaxation A</span>
                    </div>
                    <input type="range" id="R2A" class="slider" min="-1" max="3" step="0.01" value="1.7">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">R<sub>2,B</sub></span> = <span class="value" id="R2B-value">50.12</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Transverse Relaxation B</span>
                    </div>
                    <input type="range" id="R2B" class="slider" min="-1" max="3" step="0.01" value="1.7">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">ΔΩ<sub>A</sub></span> = <span class="value" id="deltaA-value">-400</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Chemical Shift A</span>
                    </div>
                    <input type="range" id="deltaA" class="slider" min="-1000" max="1000" step="1" value="-400">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">ΔΩ<sub>B</sub></span> = <span class="value" id="deltaB-value">500</span> Hz</span>
                        <span style="color: #888; font-size: 0.9em;">Chemical Shift B</span>
                    </div>
                    <input type="range" id="deltaB" class="slider" min="-1000" max="1000" step="1" value="500">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">I<sub>min</sub></span> = <span class="value" id="ftMin-value">-2.0</span></span>
                        <span style="color: #888; font-size: 0.9em;">Intensity Min</span>
                    </div>
                    <input type="range" id="ftMin" class="slider" min="-20" max="0" step="0.1" value="-2">
                </div>

                <div class="control-group">
                    <div class="control-label">
                        <span><span class="math">I<sub>max</sub></span> = <span class="value" id="ftMax-value">50.0</span></span>
                        <span style="color: #888; font-size: 0.9em;">Intensity Max</span>
                    </div>
                    <input type="range" id="ftMax" class="slider" min="1" max="200" step="0.1" value="50">
                </div>

                <div class="control-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="equalK">
                        <label for="equalK">Set <span class="math">k<sub>BA</sub> = k<sub>AB</sub></span></label>
                    </div>
                </div>
            </div>

            <div class="visualization-panel">
                <div class="chart-container">
                    <div class="chart-title">NMR Spectrum</div>
                    <div id="spectrum-plot"></div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Free Induction Decay (FID)</div>
                    <div id="fid-plot"></div>
                </div>

                <div class="images-container">
                    <div class="image-wrapper">
                        <img src="public/exchange-illustration.png" alt="Exchange Illustration" onerror="this.style.display='none'">
                    </div>
                    <div class="image-wrapper">
                        <img src="public/bloch-mcconnell.png" alt="Bloch-McConnell" onerror="this.style.display='none'">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>